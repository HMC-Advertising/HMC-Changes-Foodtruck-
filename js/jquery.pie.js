(function(e){var t=function(t,n){this.el=t;this.$el=e(this.el);this.options=e.extend({color:"wpb_button",units:"",label_selector:".vc_pie_chart_value",back_selector:".vc_pie_chart_back",responsive:true},n);this.init()};t.prototype={constructor:t,_progress_v:0,animated:false,colors:{wpb_button:"rgba(247, 247, 247, 1)","btn-primary":"rgba(0, 136, 204, 1)","btn-info":"rgba(88, 185, 218, 1)","btn-success":"rgba(106, 177, 101, 1)","btn-warning":"rgba(255, 153, 0, 1)","btn-danger":"rgba(255, 103, 91, 1)","btn-inverse":"rgba(85, 85, 85, 1)"},init:function(){this.setupColor();this.value=this.$el.data("pie-value")/100;this.thickness=this.$el.data("pie-class");if(this.thickness=="pie-thin"){border_w=1}else if(this.thickness=="pie-normal"){border_w=8}else if(this.thickness=="pie-thick"){border_w=22}this.label_value=this.$el.data("pie-label-value")||this.$el.data("pie-value");this.$wrapper=e(".vc_pie_wrapper",this.$el);this.$label=e(this.options.label_selector,this.$el);this.$back=e(this.options.back_selector,this.$el);this.$canvas=this.$el.find("canvas");this.draw();this.setWayPoint();if(this.options.responsive===true)this.setResponsive()},setupColor:function(){if(typeof this.colors[this.options.color]!=="undefined"){this.color=this.colors[this.options.color]}else if(typeof this.options.color==="string"&&this.options.color.match(/^rgba?\([^\)]+\)/)){this.color=this.options.color}else{this.color="rgba(247, 247, 247, 0.2)"}},setResponsive:function(){var t=this;e(window).resize(function(){if(t.animated===true)t.circle.stop();t.draw(true)})},draw:function(t){var n=this.$el.addClass("vc_ready").width(),r;if(!n)n=this.$el.parents(":visible").first().width()-2;n=n/100*80;r=n/2-border_w-1;this.$wrapper.css({width:n+"px"});this.$label.css({width:n,height:n,"line-height":n+"px"});this.$back.css({width:n,height:n});this.$canvas.attr({width:n+"px",height:n+"px"});this.$el.addClass("vc_ready");this.circle=new ProgressCircle({canvas:this.$canvas.get(0),minRadius:r,arcWidth:border_w});if(t===true&&this.animated===true){this._progress_v=this.value;this.circle.addEntry({fillColor:this.color,progressListener:e.proxy(this.setProgress,this)}).start()}},setProgress:function(){if(this._progress_v>=this.value){this.circle.stop();this.$label.text(this.label_value+this.options.units);return this._progress_v}this._progress_v+=.005;var e=this._progress_v/this.value*this.label_value;var t=Math.round(e)+this.options.units;this.$label.text(t);return this._progress_v},animate:function(){if(this.animated!==true){this.animated=true;this.circle.addEntry({fillColor:this.color,progressListener:e.proxy(this.setProgress,this)}).start(5)}},setWayPoint:function(){if(typeof e.fn.waypoint!=="undefined"){this.$el.waypoint(e.proxy(this.animate,this),{offset:"85%"})}else{this.animate()}}};e.fn.vcChat=function(n,r){return this.each(function(){var i=e(this),s=i.data("vc_chart"),o=typeof n==="object"?n:{color:i.data("pie-color"),units:i.data("pie-units")};if(typeof n=="undefined")i.data("vc_chart",s=new t(this,o));if(typeof n=="string")s[n](r)})};if(typeof window["vc_pieChart"]!=="function"){window.vc_pieChart=function(){e(".vc_pie_chart:visible").vcChat()}}e(document).ready(function(){!window.vc_iframe&&vc_pieChart()})})(window.jQuery)